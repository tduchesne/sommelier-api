# --- DEFAULT Configuration (Secured for Prod) ---

# Application Name
spring.application.name=sommelier-api

# Standard Log Levels (No visible SQL)
logging.level.root=INFO
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF
logging.level.com.vinotech.sommelier_api=INFO

# SECURITY: Never show technical details of errors to client
server.error.include-message=never
server.error.include-stacktrace=never

# ----------------------------------------------------
# 1. CONNECTION PARAMETERS (Environment-based)
# ----------------------------------------------------
# PostgreSQL URL - Set via environment variable DB_HOST (default: localhost:5432)
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost:5432}/sommelier_db
# Username - Set via environment variable DB_USER (default: empty - must be provided)
spring.datasource.username=${DB_USER:}
# Password - Set via environment variable DB_PASSWORD (default: empty - must be provided)
spring.datasource.password=${DB_PASSWORD:}

# ----------------------------------------------------
# 2. JPA/HIBERNATE PARAMETERS
# ----------------------------------------------------
# SQL Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# Show SQL in console (set to false for prod safety, overridden in local profile)
spring.jpa.show-sql=false
# Database initialization action:
# - none: Do nothing
# - update: Update schema
spring.jpa.hibernate.ddl-auto=update

# ----------------------------------------------------
# 3. CORS SECURITY
# ----------------------------------------------------
# Default: no origin allowed if variable is not set.
# In Prod on Render, you must set env var CORS_ALLOWED_ORIGINS
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:}

# ----------------------------------------------------
# 4. CLERK SECURITY (OAuth2 Resource Server)
# ----------------------------------------------------
# L'URL qui permet à Spring de télécharger les clés publiques pour valider les tokens
spring.security.oauth2.resourceserver.jwt.issuer-uri=${CLERK_ISSUER_URI}

